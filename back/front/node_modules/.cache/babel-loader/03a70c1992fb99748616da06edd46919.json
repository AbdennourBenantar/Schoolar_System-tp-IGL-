{"ast":null,"code":"import styled from '@emotion/styled';\nimport { createElement, useState } from 'react';\nimport { keyframes } from '@emotion/core';\nimport { __rest } from 'tslib';\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n    stroke-dasharray: \", \";\\n    stroke-dashoffset: 0;\\n    transform-origin: center;\\n    animation: \", \" \", \" ease-in-out infinite;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n    animation: \", \" \", \" linear infinite;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\" \\n 0% { stroke-dashoffset: \", \"; }\\n 50% {\\n   stroke-dashoffset: \", \";\\n   transform:rotate(135deg);\\n }\\n 100% {\\n   stroke-dashoffset: \", \";\\n   transform:rotate(450deg);\\n }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    0%    { transform: rotate(0deg); }\\n    100%  { transform: rotate(270deg); }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar duration = \"1.4s\";\nvar offset = 187;\nvar rotator =\n/*#__PURE__*/\nkeyframes(\n/*#__PURE__*/\n_templateObject());\nvar dash =\n/*#__PURE__*/\nkeyframes(\n/*#__PURE__*/\n_templateObject2(), offset, offset / 4, offset);\n\nvar LoadingSpinner = function LoadingSpinner() {\n  return createElement(LoadingSvg, {\n    width: \"65px\",\n    height: \"65px\",\n    viewBox: \"0 0 66 66\"\n  }, createElement(Circle, {\n    fill: \"none\",\n    strokeWidth: \"6\",\n    strokeLinecap: \"round\",\n    stroke: \"#000\",\n    cx: \"33\",\n    cy: \"33\",\n    r: \"30\"\n  }));\n};\n\nvar LoadingSvg =\n/*#__PURE__*/\nstyled.svg(\n/*#__PURE__*/\n_templateObject3(), rotator, duration);\nvar Circle =\n/*#__PURE__*/\nstyled.circle(\n/*#__PURE__*/\n_templateObject4(), offset, dash, duration);\n\nvar UpwardIcon = function UpwardIcon(_a) {\n  var props = __rest(_a, []);\n\n  return createElement(\"svg\", Object.assign({\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, props), createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), createElement(\"path\", {\n    d: \"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\"\n  }));\n}; // helper function to determine if a value is a Date object\n\n\nvar isDate = function isDate(item) {\n  if (Object.prototype.toString.call(item) === \"[object Date]\") {\n    return true;\n  }\n\n  return false;\n};\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\n    width: \", \";\\n    min-width: \", \";\\n    padding: 0px 10px;\\n    /* https://davidwalsh.name/css-ellipsis */\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-flow: row nowrap;\\n    background-color: inherit;\\n    color: inherit;\\n    cursor: \", \";\\n    &:focus {\\n        outline: none;\\n    }\\n    &:focus-visible {\\n        outline: auto 5px;\\n        outline-color: inherit;\\n    }\\n    width: 100%;\\n    border: none;\\n    border-bottom: 1px solid #e0e0e0;\\n    height: 48px;\\n    align-items: center;\\n    /* material subtitle 1 */\\n    font-size: 16px;\\n    letter-spacing: 0.15;\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n    user-select: none;\\n    display: flex;\\n    border: none;\\n    background-color: inherit;\\n    color: inherit;\\n    align-items: center;\\n    &:focus {\\n        outline: none;\\n    }\\n\\n    &:focus-visible {\\n        outline: auto 5px;\\n        outline-color: inherit;\\n    }\\n\\n    cursor: \", \";\\n    width: \", \";\\n    min-width: \", \";\\n    &:hover > #hoverableArrow {\\n        display: inline;\\n    }\\n    padding: 0px 10px;\\n    /* https://davidwalsh.name/css-ellipsis */\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n    white-space: nowrap;\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-flow: row nowrap;\\n    height: 48px;\\n    align-items: center;\\n    border-bottom: 1px solid #e0e0e0;\\n    /* material subtitle 2 */\\n    font-size: 14px;\\n    font-weight: bold;\\n    letter-spacing: 0.1;\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    height: 64px;\\n    align-items: center;\\n    font-size: 24px;\\n    flex: 1;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    align-items: center;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-flow: column nowrap;\\n    overflow-x: auto;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4$1() {\n  var data = _taggedTemplateLiteral([\"\\n    font-family: \\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", \\\"sans-serif\\\";\\n\"]);\n\n  _templateObject4$1 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3$1() {\n  var data = _taggedTemplateLiteral([\"\\n    display: none;\\n\"]);\n\n  _templateObject3$1 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2$1() {\n  var data = _taggedTemplateLiteral([\"\\n    display: flex;\\n    justify-content: center;\\n    padding: 12px;\\n\"]);\n\n  _templateObject2$1 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject$1() {\n  var data = _taggedTemplateLiteral([\"\\n    transition: transform 0.5s;\\n    transform: \", \";\\n\"]);\n\n  _templateObject$1 = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nvar ReactMaterialTable = function ReactMaterialTable(props) {\n  var _React$useState = useState(props.defaultSort),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      sortedColumn = _React$useState2[0],\n      setSortedColumn = _React$useState2[1]; // initialise array with all false values because\n  // no items are open initially\n\n\n  var bools = new Array(props.data.length).fill(false);\n\n  var _React$useState3 = useState(bools),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      openIndexes = _React$useState4[0],\n      setOpenIndexes = _React$useState4[1];\n\n  var toggleAccordion = function toggleAccordion(index) {\n    return function () {\n      // update the openIndexes bools\n      var tmp = _toConsumableArray(openIndexes);\n\n      tmp[index] = !tmp[index];\n      setOpenIndexes(tmp);\n    };\n  };\n\n  var tableBody = function tableBody() {\n    if (props.loading) {\n      return createElement(CenteredDiv, null, createElement(LoadingSpinner, null));\n    }\n\n    if (props.data.length === 0) {\n      return createElement(CenteredDiv, null, props.noData || \"No Data\");\n    } // If the sorting function is provided, it is assumed all sorting is handled outside.\n\n\n    if (props.sortCallback) {\n      return props.data.map(renderRow(props.columns, props.onRowSelection, props.accordion, toggleAccordion, openIndexes, props.defaultMinColWidth));\n    }\n\n    return sortData(props.data, props.columns, sortedColumn).map(renderRow(props.columns, props.onRowSelection, props.accordion, toggleAccordion, openIndexes, props.defaultMinColWidth));\n  };\n\n  return createElement(MainDiv, {\n    className: props.className\n  }, buildTitleRow(props.header, props.headerCustomContent), createElement(TableDiv, {\n    className: \"table-div\"\n  }, createElement(TableHeaderRowDiv, {\n    className: \"table-header-row\"\n  }, props.columns.map(renderHeaderColumn(calcTotalProportions(props.columns), setSortedColumn, sortedColumn, props.sortCallback, props.defaultMinColWidth))), tableBody()));\n};\n\nvar buildTitleRow = function buildTitleRow(header, headerCustomContent) {\n  return createElement(TableTitleRow, {\n    className: \"table-title-row\"\n  }, createElement(TableTitleDiv, {\n    className: \"table-title-div\"\n  }, header), headerCustomContent);\n};\n\nvar renderRow = function renderRow(columns, onRowSelection, accordion, toggleAccordion, openIndexes, defaultMinColWidth) {\n  return function (rowItem, index) {\n    var rowSelection = function rowSelection() {\n      return onRowSelection({\n        rowData: rowItem,\n        toggleAccordion: toggleAccordion(index)\n      });\n    };\n\n    return createElement(\"div\", {\n      key: index\n    }, createElement(TableRowDiv, {\n      className: \"table-row\",\n      clickable: !!onRowSelection,\n      // Will always have tabIndex to allow screenreaders to navigate through the table\n      tabIndex: !!onRowSelection ? 0 : undefined,\n      role: !!onRowSelection ? \"button\" : undefined,\n      // only add onClick listener if user has supplied a function\n      onClick: onRowSelection ? rowSelection : function () {\n        return false;\n      },\n      onKeyDown: onRowSelection ? function (event) {\n        return onEnterKeyPress(event, toggleAccordion(index));\n      } : function () {\n        return false;\n      }\n    }, columns.map(renderRowColumn(rowItem, calcTotalProportions(columns), index, openIndexes, toggleAccordion, defaultMinColWidth))), openIndexes[index] && accordion ? accordion(rowItem) : null);\n  };\n};\n\nvar renderRowColumn = function renderRowColumn(rowItem, totalWidthProportions, index, openIndexes, toggleAccordion, defaultMinColWidth) {\n  return function (columnItem, columnIndex) {\n    var tmp;\n\n    if (columnItem.cellValue) {\n      tmp = columnItem.cellValue({\n        isOpen: openIndexes[index],\n        rowData: rowItem,\n        toggleAccordion: toggleAccordion(index)\n      });\n    } else {\n      var cellData = rowItem[columnItem.dataName];\n\n      if (cellData === undefined) {\n        console.warn(\"dataName \\\"\".concat(columnItem.dataName, \"\\\" does not match any of the data fields. Make sure the key/value pair matches the dataname\"));\n      }\n\n      tmp = cellData;\n    }\n\n    return createElement(TableRowItemDiv, {\n      key: columnIndex,\n      className: \"table-cell\",\n      totalWidthProportions: totalWidthProportions,\n      colWidthProportion: columnItem.colWidthProportion,\n      minWidth: columnItem.minWidth || defaultMinColWidth || null\n    }, tmp);\n  };\n};\n\nvar onEnterKeyPress = function onEnterKeyPress(event, fn) {\n  if (event.keyCode === 13) {\n    fn();\n  }\n};\n\nvar renderHeaderColumn = function renderHeaderColumn(totalWidthProportions, setSortedColumn, sortedColumn, sortCallback, defaultMinColWidth) {\n  return function (item, index) {\n    var isCurrentColumn = sortedColumn ? item.dataName === sortedColumn.dataName : false;\n\n    var setColumn = function setColumn() {\n      return setCurrentSortColumn(isCurrentColumn, item, setSortedColumn, sortedColumn, sortCallback);\n    };\n\n    return createElement(TableHeaderItemDiv, {\n      key: index,\n      totalWidthProportions: totalWidthProportions,\n      colWidthProportion: item.colWidthProportion,\n      minWidth: item.minWidth || defaultMinColWidth || null,\n      className: \"table-header-cell\",\n      // only add onClick listener if user has supplied a sort function\n      // i.e. if the column is sortable\n      onClick: item.sort ? setColumn : function () {\n        return false;\n      },\n      clickable: !!item.sort,\n      role: !!item.sort ? \"button\" : undefined,\n      tabIndex: !!item.sort ? 0 : undefined,\n      onKeyDown: item.sort ? function (event) {\n        return onEnterKeyPress(event, setColumn);\n      } : function () {\n        return false;\n      }\n    }, item.title, renderArrow(!!item.sort, isCurrentColumn, sortedColumn && sortedColumn.order));\n  };\n};\n\nvar sortData = function sortData(data, allColumns, currentlySortedColumn) {\n  var sortedData = _toConsumableArray(data);\n\n  if (currentlySortedColumn) {\n    // retrieve the column object for the currently sorted column\n    var column = allColumns.find(function (el) {\n      return el.dataName === currentlySortedColumn.dataName;\n    });\n\n    if (column && column.sort) {\n      // if a boolean is provided, do normal alphanumeric sorting, otherwise use provided sort function\n      if (typeof column.sort === \"boolean\") {\n        sortedData = data.sort(sortFn(column.dataName, currentlySortedColumn.order));\n      } else if (typeof column.sort === \"function\" && currentlySortedColumn.order === \"asc\") {\n        sortedData = data.sort(column.sort);\n      } else if (typeof column.sort === \"function\" && currentlySortedColumn.order === \"desc\") {\n        sortedData = data.sort(column.sort).reverse();\n      } else {\n        console.warn(\"Invalid options supplied to sorting field\");\n      }\n    }\n  }\n\n  return sortedData;\n}; // sortFn is a closure that generates the comparator function for sorting the data\n\n\nvar sortFn = function sortFn(dataName, order) {\n  return function (a, b) {\n    var check = 0; // Checks if only one of the key has a value, if so no need to compare.\n\n    if (!a[dataName] && b[dataName]) {\n      return order === \"desc\" ? 1 : -1;\n    } else if (a[dataName] && !b[dataName]) {\n      return order === \"desc\" ? -1 : 1;\n    } else if (!a[dataName] && !b[dataName]) {\n      return 0;\n    } // Checks if both a and b are date objects. compares date objects only if is true\n\n\n    var bothDateObject = isDate(a[dataName]) && isDate(b[dataName]);\n    var dataA = bothDateObject ? new Date(a[dataName]) : a[dataName];\n    var dataB = bothDateObject ? new Date(b[dataName]) : b[dataName];\n\n    if (dataA > dataB) {\n      check = 1;\n    } else if (dataA < dataB) {\n      check = -1;\n    }\n\n    return order === \"desc\" ? check * -1 : check;\n  };\n}; // sum up all the supplied proportions or default to 1\n\n\nvar calcTotalProportions = function calcTotalProportions(columns) {\n  return columns.reduce(function (acc, val) {\n    return acc + (val.colWidthProportion ? val.colWidthProportion : 1);\n  }, 0);\n};\n\nvar renderArrow = function renderArrow(sortable, isCurrentColumn, order) {\n  if (isCurrentColumn) {\n    return createElement(ArrowIcon, {\n      order: order,\n      height: \"20px\"\n    });\n  }\n\n  if (sortable) {\n    return createElement(HoverableArrow, {\n      height: \"20px\",\n      id: \"hoverableArrow\"\n    });\n  }\n\n  return null;\n};\n\nvar setCurrentSortColumn = function setCurrentSortColumn(isCurrentColumn, column, setSortedColumn, sortedColumn, sortCallback) {\n  var sortObj = {\n    dataName: column.dataName,\n    order: \"asc\"\n  };\n\n  if (column.sort && isCurrentColumn) {\n    if (sortedColumn && (sortedColumn.order === \"asc\" || !sortedColumn.order)) {\n      sortObj.order = \"desc\";\n    } else if (sortedColumn && sortedColumn.order === \"desc\") {\n      sortObj.order = \"asc\";\n    }\n  }\n\n  setSortedColumn(sortObj); // If a sortCallback is provided, will delegate sorting to the provided function\n\n  if (sortCallback) {\n    sortCallback(sortObj);\n  }\n};\n\nvar ArrowIcon =\n/*#__PURE__*/\nstyled(UpwardIcon)(\n/*#__PURE__*/\n_templateObject$1(), function (props) {\n  return props.order === \"asc\" || !props.order ? \"rotate(0deg)\" : \"rotate(180deg)\";\n});\nvar CenteredDiv =\n/*#__PURE__*/\nstyled.div(\n/*#__PURE__*/\n_templateObject2$1());\nvar HoverableArrow =\n/*#__PURE__*/\nstyled(UpwardIcon)(\n/*#__PURE__*/\n_templateObject3$1());\nvar MainDiv =\n/*#__PURE__*/\nstyled.div(\n/*#__PURE__*/\n_templateObject4$1());\nvar TableDiv =\n/*#__PURE__*/\nstyled.div(\n/*#__PURE__*/\n_templateObject5());\nvar TableTitleRow =\n/*#__PURE__*/\nstyled.div(\n/*#__PURE__*/\n_templateObject6());\nvar TableTitleDiv =\n/*#__PURE__*/\nstyled.div(\n/*#__PURE__*/\n_templateObject7());\nvar TableHeaderRowDiv =\n/*#__PURE__*/\nstyled.div(\n/*#__PURE__*/\n_templateObject8());\nvar TableHeaderItemDiv =\n/*#__PURE__*/\nstyled.div(\n/*#__PURE__*/\n_templateObject9(), function (props) {\n  return props.clickable ? \"pointer\" : \"cursor\";\n}, function (props) {\n  return \"\".concat((props.colWidthProportion || 1) / props.totalWidthProportions * 100, \"%\");\n}, function (props) {\n  return props.minWidth ? \"\".concat(props.minWidth, \"px\") : null;\n});\nvar TableRowDiv =\n/*#__PURE__*/\nstyled.div(\n/*#__PURE__*/\n_templateObject10(), function (props) {\n  return props.clickable ? \"pointer\" : \"cursor\";\n});\nvar TableRowItemDiv =\n/*#__PURE__*/\nstyled.div(\n/*#__PURE__*/\n_templateObject11(), function (props) {\n  return \"\".concat((props.colWidthProportion || 1) / props.totalWidthProportions * 100, \"%\");\n}, function (props) {\n  return props.minWidth ? \"\".concat(props.minWidth, \"px\") : null;\n});\nexport default ReactMaterialTable;","map":null,"metadata":{},"sourceType":"module"}